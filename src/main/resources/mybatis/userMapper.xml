<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.apache.ibatis.personal.mapper.UserMapper">
<!--    <cache-ref namespace=""/>-->


<!--    <parameterMap id="cont" type="org.apache.ibatis.personal.model.User">-->
<!--        <parameter property="id" javaType="java.lang.Long" jdbcType="bigint"/>-->
<!--    </parameterMap>-->
    <resultMap type="org.apache.ibatis.personal.model.User" id="usermap">
        <id column="id" property="id"/>
        <result column="name" property="name"/>
    </resultMap>


    <sql id = "base_column_list">
        id,name
    </sql>


    <select id="getUser" resultMap="usermap" >
        select <include refid="base_column_list"/> from t_user where id = ${id}
    </select>

    <select id="getUserByCondition" resultMap="usermap">
        select * from t_user where 1 = 1
        <if test="id != null">
            and id = #{id}
        </if>
        <if test="name != null">
            and name = #{name}
        </if>
    </select>

    <insert id="addUser" parameterType="org.apache.ibatis.personal.model.User">
        insert into t_user(id,name) values(#{id},#{name})
    </insert>

    <update id="updateUserById">
        update t_user set name = #{name} where id = #{id}
    </update>


</mapper>
